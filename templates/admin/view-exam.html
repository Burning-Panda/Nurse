{% extends "admin/template.html" %}

{% block active %}a_exams{% endblock %}

{% block title %}
    Admin > View Exam
{% endblock %}

{% block content %}
    <div class="main-content">
        <div class="breadcrumb">
            <h1>Edit Exam</h1>
        </div>
        <div class="separator-breadcrumb border-top"></div>
        <!-- end of row-->
        <div class="row mb-4">
            <div class="col-lg-4 col-xl-4 mt-3">
                <div class="card">
                    <div class="card-body">
                        <div class="card-title mb-2">Exam name</div>
                        <form>
                            <input type="hidden"
                                   name="examID"
                                   value="0" />
                            <div class="form-group">
                                <label for="shortname">Name</label>
                                <input class="form-control" id="shortname" type="text" aria-describedby="emailHelp" placeholder="Name of the exam"><small class="form-text text-muted" id="shortnameHelp">Name of the exam.</small>
                            </div>
                            <div class="form-group">
                                <label for="testdescription">Exam description</label>
                                <input class="form-control" id="testdescription" type="text" aria-describedby="descriptionHelp" placeholder="Short description or additional info about exam">
                                <small class="form-text text-muted" id="descriptionHelp">Short description or additional info about exam.</small>
                            </div>
                            <div class="row mb-12">
                                <div class="col-lg-6 col-xl-6 mt-3 form-group">
                                    <label for="outfit">Outfit</label>
                                    <input class="form-control" id="outfit" type="text" aria-describedby="outfitHelp" placeholder="Enter the outfit"><small class="form-text text-muted" id="outfitHelp">Outfit the student should be using.</small>
                                </div>
                                <div class="col-lg-6 col-xl-6 mt-3 form-group">
                                    <label for="min_correct">Minimum Correct to pass</label>
                                    <input class="form-control" id="min_correct" type="number" aria-describedby="minCorrectHelp" placeholder="Enter the minimum amount of correct questions to pass"><small class="form-text text-muted" id="minCorrectHelp">Minimum correct to pass. Ex: 7</small>
                                </div>
                            </div>
                            <div class="border-top mt-4"></div>
                            <button class="btn btn-primary float-right mt-3" type="submit">Save</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-xl-4 mt-3">
                <div class="card">
                    <div class="card-body">
                        <div class="card-title mb-2">Questions</div>
                            <form>
                                <input type="hidden"
                                       name="examID"
                                       value="0" />

                                <div class="row" id="formBuilder">
                                    <div class="col-lg-12 form-group">
                                        <label for="question1">Spørsmål 1: <small class="form-text- text-muted">Gammelt spørsmål</small></label>
                                        <input class="form-control" id="question1" type="text" placeholder="Spørsmål">
                                    </div>
                                </div>


                                <div class="border-top mt-4"></div>
                                <input type="button" value="Add a new question" class="btn btn-secondary mt-3" id="add" />
                                <button class="btn btn-primary float-right mt-3" type="submit">Save</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end of col-->
        </div>
{% endblock %}

{% block script %}
    <script src="{{ url_for('static', filename='admin/js/plugins/datatables.min.js') }}"></script>
    <script src="{{ url_for('static', filename='admin/js/scripts/datatables.script.min.js') }}"></script>



<script type="text/javascript">
    /*
    * Creator: FarligOpptreden
    * Fetched from: https://stackoverflow.com/questions/9173182/add-remove-input-field-dynamically-with-jquery
    * Modifications done:
    *    Changed var to const
    *    Changed ID's to put the input fields into
    *    Added the correct styling and modification to the code for it to work correctly with the styles defined in the css.
    *    Removed unnecessary/irrelevant code.
    */
    $(document).ready(function() {
        $("#add").click(function() {
            const lastField = $("#formBuilder div:last");
            const intId = (lastField && lastField.length && lastField.data("idx") + 1) || 1;
            const fieldWrapper = $("<div class=\"col-lg-12 form-group row\" id=\"field" + intId + "\"/>");
            fieldWrapper.data("idx", intId);
            const fName = $("<div class=\"col-lg-11 col-xl-11 mt-3\"><input type=\"text\" class=\"form-control\" /></div>");

            const removeButton = $("<div class=\"col-lg-1 col-xl-1 mt-3\"><input class=\"btn btn-outline-danger m-1\" type=\"button\" value=\" - \" style='margin: 0!important;float:right;'></div>");
            removeButton.click(function() {
                $(this).parent().remove();
            });
            fieldWrapper.append(fName);
            fieldWrapper.append(removeButton);
            $("#formBuilder").append(fieldWrapper);
        });

    });
</script>
{% endblock %}
